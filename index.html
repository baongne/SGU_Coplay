<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./script.js"></script>
    <link rel="stylesheet" href="style.css">
    <title>SGU Coplay team</title>
</head>
<body>
  <h1 class ="teamName">Coplay SGU Team </h1>
  <hr>
  <h2 class="controlName">Remote AI Hand Gesture Control</h2>
    <form>
      <h3>1. Find the robot and pair.</h3>
      <div class="part1--content">
          <div class="part1--content__lable">
              <p class="lable">Robot profile:</p>
              <p id="robotProfileDisplay">Connected Robot Profile: </p>
          </div> 
          
             
          <div class="part1--content__input">
            <div>
                <select id="robotProfile">

                    <option value="ESP_CW_001">ESP_CW_001</option>
                    <option value="RPI_BW_001">RPI_BW_001</option>
                    <option value="RPI_CL_001">RPI_CL_001</option>
                    <option value="RPI_CL_002">RPI_CL_002</option>
                    <option value="RPI_CW_001">RPI_CW_001</option>
                    <option value="RPI_HA_001">RPI_HA_001</option>
                    <option value="RPI_HW_001">RPI_HW_001</option>
                    <option value="JTSN_HW_001">JTSN_HW_001</option>
                    <input id="RPI_BW_001" type="checkbox">

                </select>
                    
        
                <input id="service" type="text" size="17" list="services" placeholder="Bluetooth Service" disabled>
                <input id="name" type="text" size="17" placeholder="Device Name" disabled>
                <input id="namePrefix" type="text" size="17" placeholder="Device Name Prefix" disabled>
                <button id="pairingButton" disabled>Pairing</button>
              </form>


              <label for="wifiSSID" style="display: block;">Wi-Fi:</label>
              <input type="text" id="wifiSSID" name="wifiSSID" placeholder="Tên SSID">
              
              <label for="password">Password:</label>
              <input type="password" id="password" name="password" placeholder="Password">
              
              <label for="port">Port:</label>
              <input type="number" id="port" name="port" placeholder="Port">
              
              <label for="channelName">Channel name:</label>
              <input type="text" id="channelName" name="channelName" placeholder="Channel name">
</body>

<script>
  function isWebBluetoothEnabled() {
    if (navigator.bluetooth) {
      return true;
    } else {
      ChromeSamples.setStatus('Web Bluetooth API is not available.\n' +
          'Please make sure the "Experimental Web Platform features" flag is enabled.');
      return false;
    }
  }
</script>
<script>
    document.querySelector('form').addEventListener('submit', function(event) {
      event.stopPropagation();
      event.preventDefault();
  
      if (isWebBluetoothEnabled()) {
        onButtonClick();
      }
    });

    function onButtonClick() {
    let filters = [];
  
    let filterService = document.querySelector('#service').value;
    if (filterService.startsWith('0x')) {
      filterService = parseInt(filterService);
    }
    if (filterService) {
      filters.push({services: [filterService]});
    }
  
    let filterName = document.querySelector('#name').value;
    if (filterName) {
      filters.push({name: filterName});
    }
  
    let filterNamePrefix = document.querySelector('#namePrefix').value;
    if (filterNamePrefix) {
      filters.push({namePrefix: filterNamePrefix});
    }
  
    let options = {};
    if (document.querySelector('#RPI_BW_001').checked) {
      options.acceptAllDevices = true;
    } else {
      options.filters = filters;
    }
  
    navigator.bluetooth.requestDevice(options)
    .then(device => {
      log('> Name:             ' + device.name);
      log('> Id:               ' + device.id);
      log('> Connected:        ' + device.gatt.connected);
    })
    .catch(error => {
      log('Argh! ' + error);
    });
  }

  document.querySelector('#robotProfile').addEventListener('change', function() {
  let selectedProfile = this.value;
  let inputFields = document.querySelectorAll('.part1--content__input input'); // Chọn tất cả các trường nhập liệu

  if (selectedProfile === 'RPI_BW_001') {
    inputFields.forEach(inputField => {
      inputField.disabled = false; // Cho phép nhập dữ liệu khi chọn RPI_BW_001
    });
  } else {
    inputFields.forEach(inputField => {
      inputField.disabled = true; // Không cho phép nhập dữ liệu khi chọn các tùy chọn khác
    });
  }
});
  
window.addEventListener('load', function() {
  let robotProfileSelect = document.querySelector('#robotProfile');
  let pairingButton = document.querySelector('#pairingButton');

  robotProfileSelect.addEventListener('change', function() {
    let selectedProfile = this.value;
    
    if (selectedProfile === 'RPI_BW_001') {
      pairingButton.disabled = false; // Kích hoạt nút Pairing nếu chọn "RPI_BW_001"
    } else {
      pairingButton.disabled = true; // Vô hiệu hóa nút Pairing nếu không chọn "RPI_BW_001"
    }
  });

  // Ban đầu, vô hiệu hóa nút Pairing
  pairingButton.disabled = true;
  });

  window.addEventListener('load', function() {
  let robotProfileSelect = document.querySelector('#robotProfile');
  let inputFields = document.querySelectorAll('.part1--content__input input');
  let pairingButton = document.querySelector('#pairingButton');

  robotProfileSelect.addEventListener('change', function() {
    let selectedProfile = this.value;
    let enableInputFields = selectedProfile === 'RPI_BW_001';
    
    inputFields.forEach(inputField => {
      inputField.disabled = !enableInputFields; // Kích hoạt trường nhập liệu nếu chọn "RPI_BW_001"
    });

    pairingButton.disabled = !enableInputFields; // Kích hoạt nút Pairing nếu chọn "RPI_BW_001"
  });

  // Ban đầu, vô hiệu hóa trường nhập liệu và nút Pairing
  inputFields.forEach(inputField => {
    inputField.disabled = true;
  });
  pairingButton.disabled = true;
  });


  // Đoạn mã trong hàm onButtonClick() khi kết nối Bluetooth thành công
navigator.bluetooth.requestDevice(options)
.then(device => {
  // ... mã xử lý kết nối Bluetooth ...

  // Cập nhật nội dung của phần tử robotProfileDisplay
  let robotProfileDisplay = document.getElementById('robotProfileDisplay');
  robotProfileDisplay.textContent = 'Connected Robot Profile: ' + device.name;
})
.catch(error => {
  // ... mã xử lý lỗi ...
});

  </script>

</html>